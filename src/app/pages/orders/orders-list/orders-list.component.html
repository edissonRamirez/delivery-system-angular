<div class="header bg-gradient-primary pb-8 pt-5 pt-md-8"></div>

<div class="container-fluid mt--7">

  <div class="row">
    <div class="col">

      <div class="card shadow">

        <!-- HEADER -->
        <div class="card-header border-0 d-flex justify-content-between align-items-center">
          <h3 class="mb-0">Pedidos</h3>

          <div>
            <button class="btn btn-primary" (click)="onCreate()">
            + Crear Pedido
          </button>
          <button class="btn btn-primary" (click)="onTraking()">
            Ver Estado Pedido
          </button>
          </div>
        </div>

        <!-- TABLE VIEW -->
        <div *ngIf="viewMode === 'table'" class="table-responsive">
          <app-generic-table
            [columns]="columns"
            [data]="orders"
            [actionsTemplate]="actions">
          </app-generic-table>
        </div>

        <!-- CARD VIEW -->
        <div *ngIf="viewMode === 'cards'" class="p-4">

          <div class="row">
            <div class="col-lg-6 mb-4" *ngFor="let o of orders">

              <div class="order-card shadow-sm">

                <!-- LEFT COLUMN -->
                <div class="order-col">
                  <h5 class="order-title">{{ o.restaurant_name }}</h5>
                  
                  <div class="order-section-title">Cliente</div>
                  <div>{{ o.customer_name }}</div>
                  <div>{{ o.customer_phone }}</div>
                  <div>{{ o.customer_email }}</div>

                  <div class="order-section-title mt-3">Productos</div>
                  <div class="d-flex justify-content-between" *ngFor="let p of o.products">
                    <span>{{ p.name }}</span>
                    <span>{{ p.price | currency:'COP':'symbol':'1.0-0':'es-CO' }}</span>
                  </div>

                  <div class="order-total mt-2">
                    TOTAL  
                    <span>{{ o.total_price | currency:'COP':'symbol':'1.0-0':'es-CO' }}</span>
                  </div>

                  <div class="order-section-title mt-3">Dirección</div>
                  <div>{{ o.address_street }}</div>
                  <div>{{ o.address_city }}</div>

                  <div class="order-section-title mt-3">Estado</div>
                  <div>{{ o.status }}</div>

                  <div class="order-section-title mt-3">Motocicleta</div>
                  <div>{{ o.motorcycle_plate }}</div>
                </div>

                <!-- RIGHT COLUMN -->
                <div class="order-col">
                  <h5 class="order-title text-center">{{ o.restaurant_name }}</h5>

                  <div class="order-section-title">Cliente</div>
                  <div>{{ o.customer_name }}</div>
                  <div>{{ o.customer_phone }}</div>
                  <div>{{ o.customer_email }}</div>

                  <div class="order-section-title mt-3">Productos</div>

                  <div class="d-flex justify-content-between" *ngFor="let p of o.products">
                    <span>{{ p.name }}</span>
                    <span>{{ p.price | currency:'COP':'symbol':'1.0-0':'es-CO' }}</span>
                  </div>

                  <div class="order-total mt-2">
                    TOTAL  
                    <span>{{ o.total_price | currency:'COP':'symbol':'1.0-0':'es-CO' }}</span>
                  </div>

                  <div class="order-section-title mt-3">Dirección</div>
                  <div>{{ o.address_street }}</div>
                  <div>{{ o.address_city }}</div>

                  <div class="order-section-title mt-3">Estado</div>
                  <div>{{ o.status }}</div>

                  <div class="order-section-title mt-3">Motocicleta</div>
                  <div>{{ o.motorcycle_plate }}</div>
                </div>

                <!-- ACTION BUTTONS -->
                <div class="mt-3 d-flex justify-content-end">
                  <button class="btn btn-outline-primary me-2" (click)="onEdit(o)">Editar</button>
                  <button class="btn btn-outline-danger" (click)="onDelete(o)">Eliminar</button>
                </div>

              </div>

            </div>
          </div>

        </div>

      </div>

    </div>
  </div>

</div>

<!-- ACTION TEMPLATE -->
<ng-template #actions let-item>
  <button class="btn btn-sm btn-warning me-2" (click)="onAssignMoto(item)">
    Asignar moto
  </button>

  <button class="btn btn-sm btn-primary me-2" (click)="onEdit(item)">
    Editar
  </button>

  <button class="btn btn-sm btn-danger" (click)="onDelete(item)">
    Eliminar
  </button>
</ng-template>

